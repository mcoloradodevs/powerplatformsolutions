pantalla_reserva As screen:
    Fill: =RGBA(255,255,255,1)
    LoadingSpinnerColor: =RGBA(211, 66, 9, 1)
    OnVisible: =ResetForm(Form1); Set(capacidad_sala_escogida , Gallery1.Selected.Capacidad)

    Rectangle1 As rectangle:
        BorderColor: =RGBA(131, 24, 75, 1)
        Fill: =RGBA(251, 188, 159, 1)
        Height: =71
        Width: =640
        ZIndex: =1

    Label1 As label:
        Align: =Align.Right
        BorderColor: =RGBA(131, 24, 75, 1)
        Color: =RGBA(0, 0, 0, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        Height: =70
        Size: =16
        Text: ="Hola, " & User().FullName
        Width: =560
        ZIndex: =2

    Image2 As image:
        BorderColor: =RGBA(131, 24, 75, 1)
        DisabledBorderColor: =RGBA(166, 166, 166, 1)
        DisabledFill: =RGBA(244, 244, 244, 1)
        Height: =50
        Image: =User().Image
        RadiusBottomLeft: =50
        RadiusBottomRight: =50
        RadiusTopLeft: =50
        RadiusTopRight: =50
        Width: =50
        X: =578
        Y: =10
        ZIndex: =3

    Form1 As form:
        BorderColor: =RGBA(131, 24, 75, 1)
        DataSource: =Reservas
        DefaultMode: =FormMode.New
        Height: =306
        Width: =640
        Y: =141
        ZIndex: =4

        Fecha_DataCard1 As typedDataCard.dateTimeEditCard:
            BorderColor: =RGBA(131, 24, 75, 1)
            BorderStyle: =BorderStyle.Solid
            DataField: ="msus_fecha"
            Default: =Today()
            DisplayMode: =Parent.DisplayMode
            DisplayName: =DataSourceInfo([@Reservas],DataSourceInfo.DisplayName,"msus_fecha")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            Required: =true
            Update: =DateValue1.SelectedDate
            Width: =640
            X: =0
            Y: =0
            ZIndex: =1

            DataCardKey3 As label:
                AutoHeight: =true
                Color: =RGBA(131, 24, 75, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                Height: =48
                Size: =18
                Text: =Parent.DisplayName
                Width: =Parent.Width - 60
                Wrap: =false
                X: =30
                Y: =10
                ZIndex: =1

            DateValue1 As datepicker:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                CalendarHeaderFill: =RGBA(211, 66, 9, 1)
                Color: =RGBA(0, 0, 0, 1)
                DefaultDate: =Parent.Default
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayMode: =Parent.DisplayMode
                EndYear: =Year(Today())+100
                Height: =70
                HoverDateFill: =RGBA(255, 211, 205, 1)
                IconBackground: =RGBA(211, 66, 9, 1)
                IsEditable: =true
                PaddingBottom: =0
                PaddingLeft: =If(Self.DisplayMode = DisplayMode.Edit, 5, 0)
                SelectedDateFill: =RGBA(211, 66, 9, 1)
                Size: =18
                StartYear: =1899
                Tooltip: =Parent.DisplayName
                Width: =580
                X: =30
                Y: =DataCardKey3.Y + DataCardKey3.Height + 5
                ZIndex: =2

            ErrorMessage2 As label:
                AutoHeight: =true
                Color: =RGBA(168, 0, 0, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                FontWeight: =FontWeight.Semibold
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =24
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DateValue1.Y + DateValue1.Height
                ZIndex: =6

            StarVisible2 As label:
                Align: =Align.Center
                Color: =RGBA(131, 24, 75, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                Height: =DataCardKey3.Height
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: =DataCardKey3.Y
                ZIndex: =7

        "'Email Aprobador_DataCard1' As typedDataCard.textualEditCard":
            BorderColor: =RGBA(131, 24, 75, 1)
            BorderStyle: =BorderStyle.Solid
            DataField: ="msus_emailaprobador"
            Default: =Office365Users.ManagerV2(User().Email).mail
            DisplayMode: =DisplayMode.Disabled
            DisplayName: =DataSourceInfo([@Reservas],DataSourceInfo.DisplayName,"msus_emailaprobador")
            Fill: =RGBA(0, 0, 0, 0)
            Height: =50
            MaxLength: =DataSourceInfo([@Reservas], DataSourceInfo.MaxLength, "msus_emailaprobador")
            Required: =false
            Update: =DataCardValue3.Text
            Width: =640
            X: =0
            Y: =1
            ZIndex: =1

            DataCardKey4 As label:
                AutoHeight: =true
                Color: =RGBA(131, 24, 75, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                Height: =48
                Size: =18
                Text: =Parent.DisplayName
                Width: =Parent.Width - 60
                Wrap: =false
                X: =30
                Y: =10
                ZIndex: =1

            DataCardValue3 As text:
                BorderColor: =If(IsBlank(Parent.Error), Parent.BorderColor, Color.Red)
                BorderThickness: =2
                Color: =RGBA(0, 0, 0, 1)
                Default: =Parent.Default
                DelayOutput: =true
                DisabledBorderColor: =RGBA(166, 166, 166, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                DisabledFill: =RGBA(244, 244, 244, 1)
                DisplayMode: =Parent.DisplayMode
                FocusedBorderThickness: =4
                Height: =70
                HoverBorderColor: =RGBA(131, 24, 75, 1)
                HoverColor: =RGBA(0, 0, 0, 1)
                HoverFill: =RGBA(255, 211, 205, 1)
                MaxLength: =Parent.MaxLength
                PaddingLeft: =5
                RadiusBottomLeft: =0
                RadiusBottomRight: =0
                RadiusTopLeft: =0
                RadiusTopRight: =0
                Size: =18
                Tooltip: =Parent.DisplayName
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardKey4.Y + DataCardKey4.Height + 5
                ZIndex: =2

            ErrorMessage3 As label:
                AutoHeight: =true
                Color: =RGBA(168, 0, 0, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                FontWeight: =FontWeight.Semibold
                Height: =10
                Live: =Live.Assertive
                PaddingBottom: =0
                PaddingLeft: =0
                PaddingRight: =0
                PaddingTop: =0
                Size: =24
                Text: =Parent.Error
                Visible: =Parent.DisplayMode=DisplayMode.Edit
                Width: =Parent.Width - 60
                X: =30
                Y: =DataCardValue3.Y + DataCardValue3.Height
                ZIndex: =3

            StarVisible3 As label:
                Align: =Align.Center
                Color: =RGBA(131, 24, 75, 1)
                DisabledColor: =RGBA(166, 166, 166, 1)
                Height: =DataCardKey4.Height
                Size: =21
                Text: ="*"
                Visible: =And(Parent.Required, Parent.DisplayMode=DisplayMode.Edit)
                Width: =30
                Wrap: =false
                Y: =DataCardKey4.Y
                ZIndex: =4

    "Gallery1 As gallery.'BrowseLayout_Vertical_TwoTextOneImageVariant_ver4.0'":
        BorderColor: =RGBA(131, 24, 75, 1)
        Default: =First(Secciones)
        Height: =491
        Items: =Secciones
        Layout: =Layout.Vertical
        OnSelect: =Set( capacidad_sala_escogida, Value(txt_capacidad.Text) )
        TemplateFill: =If( Value(txt_capacidad.Text) > 0,  If(ThisItem.IsSelected, Rectangle1.Fill) )
        TemplatePadding: =0
        TemplateSize: =120
        Width: =578
        X: =30
        Y: =517
        ZIndex: =5

        Image3 As image:
            BorderColor: =RGBA(131, 24, 75, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            DisabledFill: =RGBA(244, 244, 244, 1)
            Height: =64
            Image: =placeholder
            OnSelect: =Select(Parent)
            Width: =59
            X: =16
            Y: =20
            ZIndex: =1

        Title1 As label:
            Color: =RGBA(0, 0, 0, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            FontWeight: =FontWeight.Semibold
            Height: =Self.Size * 1.8
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =20
            Text: =ThisItem.'Nombre sección'
            VerticalAlign: =VerticalAlign.Top
            Width: =Parent.TemplateWidth - Image3.Width - 104
            X: =Image3.X + Image3.Width + 24
            Y: =20
            ZIndex: =2

        Subtitle1 As label:
            Color: =RGBA(0, 0, 0, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            Height: =32
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =18
            Text: |-
                ="Capacidad disponible: " 
            VerticalAlign: =VerticalAlign.Top
            Width: =257
            X: =Title1.X
            Y: =Title1.Y + Title1.Height + 4
            ZIndex: =3

        Separator2 As rectangle:
            BorderColor: =RGBA(131, 24, 75, 1)
            Fill: =RGBA(131, 24, 75, 1)
            Height: =1
            OnSelect: =Select(Parent)
            Width: =Parent.TemplateWidth
            Y: =Parent.TemplateHeight - 1
            ZIndex: =5

        Label3 As label:
            Align: =Align.Center
            BorderColor: =RGBA(131, 24, 75, 1)
            Color: =RGBA(211, 66, 9, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            Height: =72
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingTop: =0
            Size: =36
            Text: =ThisItem.Piso
            Width: =116
            X: =448
            Y: =7
            ZIndex: =6

        Label4 As label:
            Align: =Align.Center
            BorderColor: =RGBA(131, 24, 75, 1)
            Color: =RGBA(211, 66, 9, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            FontWeight: =FontWeight.Semibold
            Height: =18
            OnSelect: =Select(Parent)
            Size: =12
            Text: ="Piso"
            Width: =116
            X: =448
            Y: =79
            ZIndex: =7

        txt_capacidad As label:
            Color: =RGBA(0, 0, 0, 1)
            DisabledColor: =RGBA(166, 166, 166, 1)
            Height: =Self.Size * 1.8
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =18
            Text: |
                =ThisItem.Capacidad - CountRows(Filter(Reservas, 'Sección reservada'.Sección = ThisItem.Sección And Fecha = If(IsBlank(DateValue1.SelectedDate), Today(),DateValue1.SelectedDate)) ) 
            VerticalAlign: =VerticalAlign.Top
            Width: |
                =100
            X: =356
            Y: =60
            ZIndex: =8

        Rectangle2 As rectangle:
            BorderColor: =RGBA(131, 24, 75, 1)
            DisplayMode: =DisplayMode.View
            Fill: =RGBA(149, 149, 149, 0.76)
            Height: =119
            OnSelect: =
            Visible: =Value(txt_capacidad.Text) <=0
            Width: =578
            ZIndex: =9

    Label2 As label:
        BorderColor: =RGBA(131, 24, 75, 1)
        Color: =RGBA(0, 0, 0, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        Font: =Font.'Segoe UI'
        FontWeight: =FontWeight.Semibold
        Height: =70
        Size: =21
        Text: ="Secciones disponibles"
        Width: =578
        X: =31
        Y: =447
        ZIndex: =6

    Label2_1 As label:
        BorderColor: =RGBA(131, 24, 75, 1)
        Color: =RGBA(0, 0, 0, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        Font: =Font.'Segoe UI'
        FontWeight: =FontWeight.Semibold
        Height: =70
        Size: =21
        Text: ="Selecciona una fecha"
        Width: =578
        X: =30
        Y: =71
        ZIndex: =7

    Button1_2 As button:
        DisabledBorderColor: =RGBA(166, 166, 166, 1)
        DisabledColor: =RGBA(166, 166, 166, 1)
        DisabledFill: =RGBA(244, 244, 244, 1)
        DisplayMode: =If( capacidad_sala_escogida <= 0 Or DateValue1.SelectedDate < Today(), Disabled, Edit)
        Fill: =RGBA(221, 79, 14, 1)
        FontWeight: =FontWeight.Semibold
        Height: =70
        HoverColor: =RGBA(255, 255, 255, 1)
        HoverFill: =ColorFade(RGBA(211, 66, 9, 1), -20%)
        OnSelect: |+
            =IfError(Patch(Reservas, Defaults(Reservas), {Fecha: If( IsBlank(DateValue1.SelectedDate), Today(), DateValue1.SelectedDate) ,  'Sección reservada': Gallery1.Selected, 'Estatus Aprobación': 'Estatus Aprobación'.'En espera', 'Email Aprobador': 'Email Aprobador_DataCard1'.Update} ) , Notify("Ocurrió un error al hacer su reserva, por favor intente de nuevo. Error: " & First(Errors(Reservas)).Message, NotificationType.Error); Refresh(Secciones), Navigate(pantalla_principal); Notify("Su reserva para el día " & Text(Fecha_DataCard1.Update, ShortDate) & " fue creada con éxito. ¡Lo(a) esperamos!", NotificationType.Success); Refresh(Secciones); ResetForm(Form1) )
            
        Size: =18
        Text: ="Reservar puesto"
        Width: =577
        X: =32
        Y: =1039
        ZIndex: =8

    Icon1_1 As icon.Add:
        BorderColor: =RGBA(131, 24, 75, 1)
        Color: =RGBA(131, 24, 75, 1)
        DisabledBorderColor: =RGBA(166, 166, 166, 1)
        DisabledColor: =RGBA(244, 244, 244, 1)
        Height: =71
        Icon: =Icon.Home
        OnSelect: =Navigate(pantalla_principal)
        PaddingBottom: =15
        PaddingLeft: =15
        PaddingRight: =15
        PaddingTop: =15
        Width: =71
        ZIndex: =9

